!function(t,e,i){t.ui=e.extend(t.ui,{fillTemplate:function(e,n){return i(t.ui.formatString(i(e).html(),n).replace(/(<img(\s+.*)?)(\s+jt-src=")/,'$1 src="')).removeAttr("id")},updateCounter:function(t,e,i){var n=null,r="";return null==e&&(e=0),null==i?(n=/\(([\d\?]+)\)$/,r=""+e):(n=/\(([\d\?]+\/[\d\?\+-]+)\)$/,r=""+e+"/"+i),t.match(n)?t=t.replace(n,"("+r+")"):t+=" ("+r+")",t}}),t.ListWidgeting=function(t){e.extend(!0,this,e.common(t,this)),this.target=t.target,this.clearItems()},t.ListWidgeting.prototype={itemId:"id",populate:function(t,e){this.items=t,i(this.target).empty();for(var n=0,r=t.length;n<r;n++)i(this.target).append(this.renderItem("function"==typeof e?e(t[n]):t[n]))},addItem:function(t){return this.items.push(t),this.renderItem(t)},clearItems:function(){i(this.target).empty(),this.items=[]},findItem:function(t){var i=this;return e.findIndex(this.items,"string"!=typeof t?t:function(e){return doc[i.itemId]===t})},eraseItem:function(t){var e=this.findItem(t);return e>=0&&this.items.splice(e,1)[0]},enumerateItems:function(t){for(var e=i(this.target).children(),n=0,r=this.items.length;n<r;++n)t.call(e[n],this.items[n])}}}(jToxKit,asSys,jQuery);
