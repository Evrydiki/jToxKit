!function(){var e={version:"2.0.1"};!function(e,s){e.Translation=function(e){s.extend(!0,this,e)},e.Translation.prototype={__expects:["translateResponse"],init:function(){s.pass(this,e.Translation,"init")},parseResponse:function(t,n){s.pass(this,e.Translation,"parseResponse");var o=this.translateResponse(t,n),a=this;s.each(this.listeners,function(e){s.act(e,e.afterTranslation,o,n,a)})}}}(e,asSys),function(e,s){var t={study:{fields:/topcategory[_sh]*|endpointcategory[_sh]*|guidance_[_sh]*|reference[_sh]*|reference_owner[_sh]*|reference_year[_sh]*|guidance[_sh]*/},composition:{fields:/CORE|COATING|CONSTITUENT|ADDITIVE|IMPURITY|FUNCTIONALISATION|DOPING/}};e.RawSolrTranslation=function(e){this.collapseRules=s.extend(!0,{},t,e&&e.collapseRules)},e.RawSolrTranslation.prototype={init:function(t){s.pass(this,e.RawSolrTranslation,"init")},translateResponse:function(e,t){for(var n=[],o=this,a=function(e,t){s.each(o.collapseRules,function(n,o){var a={};s.each(t,function(e,s){s.match(n.fields)&&(delete t[s],Array.isArray(e)&&1==e.length&&(e=e[0]),a[s]=e)}),void 0===e._extended_&&(e._extended_={}),void 0===e._extended_[o]?e._extended_[o]=[a]:e._extended_[o].push(a)}),s.each(t,function(s,t){Array.isArray(s)&&1==s.length&&(s=s[0]),e[t]=s})},r=0,i=e.response.docs.length;r<i;++r){var c=e.response.docs[r],d=e.expanded[c.s_uuid],l={};a(l,c);for(var p=0,u=d.docs.length;p<u;++p)a(l,d.docs[p]);n.push(l)}return{entries:n,stats:s.extend({},e.stats,e.responseHeader),facets:s.extend({},e.facet_counts.facet_fields||e.facets,e.facet_counts.facet_pivot),paging:{start:e.response.start,count:e.response.docs.length,total:e.response.numFound,pageSize:parseInt(e.responseHeader.params.rows)}}}}}(e,asSys),function(e,s){e.NestedSolrTranslation=function(e){this.nestingField=e&&e.nestingField||"type_s"},e.NestedSolrTranslation.prototype={init:function(t){s.pass(this,e.NestedSolrTranslation,"init")},translateResponse:function(e,t){for(var n=e.response.docs,o=0,a=n.length;o<a;++o){for(var r=n[o],i={},c=0,d=r._childDocuments_.length;c<d;++c){var l=r._childDocuments_[c],p=l[this.nestingField];void 0===i[p]&&(i[p]=[]),i[p].push(l)}delete r._childDocuments_,r._extended_=i}return{entries:n,stats:s.extend({},e.stats,e.responseHeader),facets:e.facets,paging:{start:e.response.start,count:e.response.docs.length,total:e.response.numFound,pageSize:parseInt(e.responseHeader.params.rows)}}}}}(e,asSys),"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=e:(this.jToxKit=a$.extend({},this.jToxKit,e),"function"==typeof define&&define.amd&&define(e))}();
